<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>

</head>

<body>

<h1>高德地图路线预览</h1>

<ul>
<li>没啥稀奇的，不过是给两个项目用，单独提取处理。</li>
<li>这是一个vue的项目</li>
</ul>

<h1>外部参数</h1>

<ul>
<li>className:'',</li>
<li>loadPoint:[lng, lat]</li>
<li>unloadPoint:[lng, lat]</li>
<li>loadRule:(distance) => { // distance单位米
return [{
  type:'province',// 'city', 'district', 
  strokeColor:'',
  strokeWeight:'',
  fillOpacity:0.4,
  fillColor:'',
}, {
  type:'circle',
  strokeColor:'',
  strokeWeight:'',
  fillOpacity:0.4,
  fillColor:'',
  circleRange:10,
}, {
  type:'marker',
  image:'url', // URL.createObjectURL()
  size:[56,56],
  offset:[-28,-45],
}]
} || defaultLoadRule</li>
<li>unloadRule:(distance) => { // distance单位米
return [{
  type:'province',// 'city', 'district', 
  strokeColor:'',
  strokeWeight:'',
  fillOpacity:0.4,
  fillColor:'',
}, {
  type:'circle',
  strokeColor:'',
  strokeWeight:'',
  fillOpacity:0.4,
  fillColor:'',
  circleRange:10,
}, {
  type:'marker',
  image:'url', // URL.createObjectURL()
  size:[56,56],
  offset:[-28,-45],
}]
} || defaultUnloadRule</li>
<li>amap 需要插件 AMap.DistrictSearch,AMap.Geolocation,AMap.Geocoder</li>
</ul>

<h1>内部参数</h1>

<ul>
<li><p>defaultLoadRule</p>

<p><code>
(distance) =&gt; {
  const circleOption={
    fillColor: "#E0202040",
    strokeColor: "#E0202080",
    fillOpacity: 0.5, //填充透明度
    strokeOpacity: 0.5 //线透明度
  };
  const marker = {
    image: URL.createObjectURL(new Blob([loadPointMarker], {type:'image/svg+xml'})),
    size:[56, 56],
    offset:[-28, -45],
    type:'marker',
  };
  if(distance &lt;= 10e3) {
    return [marker, Object.assign({type:'circle', radius:3000}, circleOption)];
  } else if (distance &lt;= 30e3) {
    return [marker, Object.assign({type:'circle', radius:4000}, circleOption)];
  } else if (distance &lt; 100e3) {
    return [
      marker,
      Object.assign({ type:'district' }, circleOption, {fillOpacity:0.4}),
      Object.assign({ type:'circle', radius:5000 }, circleOption)
    ];
  } else {
    return [
      marker,
      Object.assign({ type:'district' }, circleOption, {fillOpacity:0.4}),
      Object.assign({ type:'circle', radius:10000 }, circleOption)
    ];
  };
}
</code></p></li>
<li><p>defaultUnloadRule:</p>

<p><code>
(distance) =&gt; {
  const circleOption={
    fillColor: "#E0202040",
    strokeColor: "#E0202080",
    fillOpacity: 0.5, //填充透明度
    strokeOpacity: 0.5 //线透明度
  };
  const marker = {
    image: URL.createObjectURL(new Blob([unloadPointMarker], {type:'image/svg+xml'})),
    size:[56, 56],
    offset:[-28, -45],
    type:'marker',
  };
  if(distance &lt;= 10e3) {
    return [marker, Object.assign({type:'circle', radius:3000}, circleOption)];
  } else if (distance &lt;= 30e3) {
    return [marker, Object.assign({type:'circle', radius:4000}, circleOption)];
  } else if (distance &lt; 100e3) {
    return [
      marker,
      Object.assign({ type:'district' }, circleOption, {fillOpacity:0.4}),
      Object.assign({ type:'circle', radius:5000 }, circleOption)
    ];
  } else {
    return [
      marker,
      Object.assign({ type:'district' }, circleOption, {fillOpacity:0.4}),
      Object.assign({ type:'circle', radius:10000 }, circleOption)
    ];
  };
}
</code></p></li>
</ul>

</body>
</html>
